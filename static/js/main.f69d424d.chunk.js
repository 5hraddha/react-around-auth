(this["webpackJsonpreact-around-auth"]=this["webpackJsonpreact-around-auth"]||[]).push([[0],{35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(20),s=a.n(i),o=a(9),c=a(2),l=a(23),u=a(3),d=a(4),p=a(0);var h=function(e){var t=e.setIsMenuOpen,a=e.isMenuOpen,n=e.linkText,i=e.userEmail,s=e.onLogOut,o="".concat(a?"hamburger__button hamburger__button_close":"hamburger__button"),c="".concat(a?"hamburger__menu hamburger__menu_visible":"hamburger__menu");return r.a.useEffect((function(){t(!1)}),[t]),Object(p.jsxs)("div",{className:"hamburger",children:[Object(p.jsx)("button",{className:o,type:"button","aria-label":"Hamburger Button",onClick:function(){return t(!a)}}),Object(p.jsx)("nav",{className:c,onClick:function(){return t(!1)},children:Object(p.jsxs)("ul",{className:"hamburger__menu-list",children:[Object(p.jsx)("li",{className:"hamburger__menu-list-item",children:Object(p.jsx)("p",{className:"hamburger__text",children:i})}),Object(p.jsx)("li",{className:"hamburger__menu-list-item",children:Object(p.jsx)("button",{className:"hamburger__logout-button",onClick:s,children:n})})]})})]})},b=a.p+"static/media/logo.3755f99c.svg";var m=function(e){var t=r.a.useState(window.innerWidth),a=Object(u.a)(t,2),n=a[0],i=a[1],s=r.a.useState(!1),l=Object(u.a)(s,2),d=l[0],m=l[1],j="".concat(d&&n<=550?"header header_menu-open":"header");return r.a.useEffect((function(){var e=null,t=function(){clearTimeout(e),e=setTimeout((function(){i(window.innerWidth)}),150)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}})),Object(p.jsxs)("header",{className:j,children:[Object(p.jsx)("img",{className:"logo",src:b,alt:"logo of the webpage having text around the US"}),Object(p.jsx)("div",{className:"header__content",children:function(){if(!e.isLoggedIn){var t=e.linkPath,a=e.linkText;return Object(p.jsx)("nav",{className:"header__menu",children:Object(p.jsx)(o.b,{className:"header__link",to:t,children:a})})}if(e.isLoggedIn&&n>550){var r=e.linkText,i=e.userEmail,s=e.onLogOut;return Object(p.jsx)("nav",{className:"header__menu",children:Object(p.jsxs)("ul",{className:"header__menu-list",children:[Object(p.jsx)("li",{children:Object(p.jsx)("p",{className:"header__text",children:i})}),Object(p.jsx)("li",{children:Object(p.jsx)("button",{className:"header__button",onClick:s,children:r})})]})})}return Object(p.jsx)(h,Object(c.a)({setIsMenuOpen:m,isMenuOpen:d},e))}()})]})},j=r.a.createContext();var _=function(e){var t=e.card,a=e.onCardClick,n=e.onCardLike,i=e.onCardDeleteClick,s=r.a.useContext(j),o=t.owner._id===s._id,c="element__delete-btn ".concat(o?"element__delete-btn_visible":"element__delete-btn_hidden"),l=t.likes.some((function(e){return e._id===s._id})),u="element__like-btn ".concat(l&&"element__like-btn_active");return Object(p.jsxs)("li",{className:"element",children:[Object(p.jsx)("img",{className:"element__img",src:t.link,alt:t.name,onClick:function(){return a(t)}}),Object(p.jsxs)("div",{className:"element__text",children:[Object(p.jsx)("h2",{className:"element__title",children:t.name}),Object(p.jsxs)("div",{className:"element__likes",children:[Object(p.jsx)("button",{className:u,type:"button","aria-label":"Like Image",onClick:function(){return n(t)}}),Object(p.jsx)("p",{className:"element__like-count",children:t.likes.length})]})]}),Object(p.jsx)("button",{className:c,type:"button","aria-label":"Delete Image",onClick:function(){return i(t)}})]})};var g=function(e){var t=e.cards,a=e.onEditProfileClick,n=e.onAddPlaceClick,i=e.onEditAvatarClick,s=e.onCardClick,o=e.onCardDeleteClick,c=e.onCardLike,l=r.a.useContext(j);return Object(p.jsxs)("main",{children:[Object(p.jsxs)("section",{className:"profile",children:[Object(p.jsxs)("div",{className:"profile__avatar-container",children:[Object(p.jsx)("img",{className:"profile__avatar",src:l.avatar,alt:"profile avatar"}),Object(p.jsx)("button",{className:"profile__avatar-update-button",type:"button","aria-label":"Update Profile Picture",onClick:i})]}),Object(p.jsxs)("div",{className:"profile__info",children:[Object(p.jsxs)("div",{className:"profile__main-content",children:[Object(p.jsx)("h1",{className:"profile__title",children:l.name}),Object(p.jsx)("button",{className:"profile__edit-btn",type:"button","aria-label":"Edit Profile",onClick:a})]}),Object(p.jsx)("p",{className:"profile__subtitle",children:l.about})]}),Object(p.jsx)("button",{className:"profile__add-btn",type:"button","aria-label":"Add Image",onClick:n})]}),Object(p.jsx)("section",{children:Object(p.jsx)("ul",{className:"elements",children:t.map((function(e){return Object(p.jsx)(_,{card:e,onCardClick:s,onCardLike:c,onCardDeleteClick:o},e._id)}))})})]})};var f=function(e){var t=e.card,a=e.onClose;return Object(p.jsx)("div",{className:"popup popup_rel_image ".concat(t&&"popup_opened"),children:Object(p.jsxs)("div",{className:"popup__container popup__container_rel_image",children:[Object(p.jsxs)("figure",{className:"popup__figure",children:[Object(p.jsx)("img",{className:"popup__img",src:"".concat(t&&t.link),alt:"".concat(t&&t.name)}),Object(p.jsx)("figcaption",{className:"popup__caption",children:"".concat(t&&t.name)})]}),Object(p.jsx)("button",{className:"popup__close-btn popup__close-btn_rel_image",type:"button",onClick:a,"aria-label":"Close popup"})]})})},O=a(12);function v(e){var t={};e.map((function(e){return t[e]=""}));var a=r.a.useState(t),n=Object(u.a)(a,2),i=n[0],s=n[1],o=r.a.useState(t),l=Object(u.a)(o,2),d=l[0],p=l[1],h=r.a.useState(!0),b=Object(u.a)(h,2),m=b[0],j=b[1],_=r.a.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s(e),p(t),j(a)}),[s,p,j]);return{values:i,isValid:m,errors:d,handleChange:function(e){var t=e.target,a=t.name,n=t.value,r=t.validationMessage;s(Object(c.a)(Object(c.a)({},i),{},Object(O.a)({},a,n))),p(Object(c.a)(Object(c.a)({},d),{},Object(O.a)({},a,r))),j(e.target.closest("form").checkValidity())},resetForm:_}}var x=function(e){var t=e.children,a=e.onClose,n=e.onSubmit,i=e.name,s=e.title,o=e.btnLabel,c=e.isOpen,l=r.a.createRef(),d=r.a.useState(!1),h=Object(u.a)(d,2),b=h[0],m=h[1];r.a.useEffect((function(){m(l.current.checkValidity())}),[c,l]);var j="popup__submit popup__submit_rel_".concat(i," ").concat(!b&&"popup__submit_disabled");return Object(p.jsx)("div",{className:"popup popup_rel_".concat(i," ").concat(c&&"popup_opened"),children:Object(p.jsxs)("div",{className:"popup__container",children:[Object(p.jsxs)("form",{className:"popup__form",name:i,action:"#",ref:l,onSubmit:n,onChange:function(){m(l.current.checkValidity())},noValidate:!0,children:[Object(p.jsx)("h2",{className:"popup__title popup__title_rel_".concat(i),children:s}),t,Object(p.jsx)("button",{className:j,type:"submit","aria-label":"".concat(o," ").concat(i),children:o})]}),Object(p.jsx)("button",{className:"popup__close-btn",type:"button","aria-label":"Close popup",onClick:a})]})})};var k=function(e){var t=e.isOpen,a=e.isDataLoading,n=e.onClose,i=e.onUpdateUser,s=v(["title","subtitle"]),o=s.values,l=s.isValid,u=s.errors,d=s.handleChange,h=s.resetForm,b=r.a.useContext(j);r.a.useEffect((function(){var e={title:b.name||"",subtitle:b.about||""};h(Object(c.a)({},e),Object(c.a)({},{title:"",subtitle:""}),!0)}),[t,h,b]);var m=function(e){return d(e)},_="popup__input ".concat(!l&&u.title&&"popup__input_type_error"),g="popup__error ".concat(!l&&u.title&&"popup__error_visible"),f="popup__input ".concat(!l&&u.subtitle&&"popup__input_type_error"),O="popup__error ".concat(!l&&u.subtitle&&"popup__error_visible");return Object(p.jsxs)(x,{name:"profile",title:"Edit profile",btnLabel:a?"Saving":"Save",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault();var t=o.title,a=o.subtitle;(l||t&&a)&&i({name:t,about:a})},children:[Object(p.jsx)("input",{className:_,type:"text",id:"name-input",name:"title",placeholder:"Name",minLength:"2",maxLength:"40",onChange:m,value:o.title,required:!0}),Object(p.jsx)("span",{id:"name-input-error",className:g,children:u.title}),Object(p.jsx)("input",{className:f,type:"text",id:"about-input",name:"subtitle",placeholder:"About me",minLength:"2",maxLength:"200",onChange:m,value:o.subtitle,required:!0}),Object(p.jsx)("span",{id:"about-input-error",className:O,children:u.subtitle})]})};var C=function(e){var t=e.isOpen,a=e.isDataLoading,n=e.onClose,i=e.onUpdateAvatar,s=v(["avatarlink"]),o=s.values,l=s.isValid,u=s.errors,d=s.handleChange,h=s.resetForm;r.a.useEffect((function(){var e={avatarlink:""};h(Object(c.a)({},e),Object(c.a)({},e),!0)}),[t,h]);var b="popup__input ".concat(!l&&u.avatarlink&&"popup__input_type_error"),m="popup__error ".concat(!l&&u.avatarlink&&"popup__error_visible");return Object(p.jsxs)(x,{name:"avatar",title:"Change Profile Picture",btnLabel:a?"Saving":"Save",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault();var t=o.avatarlink;(l||t)&&i(t)},children:[Object(p.jsx)("input",{className:b,type:"url",id:"avatarlink-input",name:"avatarlink",placeholder:"Image link",value:o.avatarlink,onChange:function(e){return d(e)},required:!0}),Object(p.jsx)("span",{id:"avatarlink-input-error",className:m,children:u.avatarlink})]})};var N=function(e){var t=e.isOpen,a=e.isDataLoading,n=e.onClose,i=e.onAddPlace,s=v(["name","link"]),o=s.values,l=s.isValid,u=s.errors,d=s.handleChange,h=s.resetForm;r.a.useEffect((function(){var e={name:"",link:""};h(Object(c.a)({},e),Object(c.a)({},e),!0)}),[t,h]);var b=function(e){return d(e)},m="popup__input ".concat(!l&&u.name&&"popup__input_type_error"),j="popup__error ".concat(!l&&u.name&&"popup__error_visible"),_="popup__input ".concat(!l&&u.link&&"popup__input_type_error"),g="popup__error ".concat(!l&&u.link&&"popup__error_visible");return Object(p.jsxs)(x,{name:"place",title:"New Place",btnLabel:a?"Creating":"Create",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault();var t=o.name,a=o.link;(l||t&&a)&&i(t,a)},children:[Object(p.jsx)("input",{className:m,type:"text",id:"place-input",name:"name",placeholder:"Title",minLength:"1",maxLength:"30",value:o.name,onChange:b,required:!0}),Object(p.jsx)("span",{id:"place-input-error",className:j,children:u.name}),Object(p.jsx)("input",{className:_,type:"url",id:"link-input",name:"link",placeholder:"Image link",value:o.link,onChange:b,required:!0}),Object(p.jsx)("span",{id:"link-input-error",className:g,children:u.link})]})};var S=function(e){var t=e.card,a=e.isOpen,n=e.isDataLoading,r=e.onClose,i=e.onCardDelete;return Object(p.jsx)(x,{name:"delete",title:"Are you sure?",btnLabel:n?"Deleting":"Yes",isOpen:a,onClose:r,onSubmit:function(e){e.preventDefault(),i(t)}})};var w=function(e){var t=e.name,a=e.title,n=e.btnLabel,i=e.linkPath,s=e.linkText,c=e.onSubmit,l=e.children,d=r.a.createRef(),h=r.a.useState(!1),b=Object(u.a)(h,2),m=b[0],j=b[1],_="form__submit ".concat(!m&&"form__submit_disabled");return Object(p.jsxs)("form",{className:"form",name:t,action:"#",ref:d,onSubmit:c,onChange:function(){j(d.current.checkValidity())},noValidate:!0,children:[Object(p.jsx)("h2",{className:"form__title",children:a}),l,Object(p.jsx)("button",{className:_,type:"submit","aria-label":"".concat(n," ").concat(t),children:n}),Object(p.jsx)(o.b,{to:i,className:"form__link",children:s})]})};var L=function(e){var t=e.isDataLoading,a=e.onSubmit,n=e.registerEmail,i=e.setRegisterEmail,s=e.registerPassword,o=e.setRegisterPassword,l=v(["register-email","register-password"]),u=l.isValid,d=l.errors,h=l.handleChange,b=l.resetForm;r.a.useEffect((function(){var e={"register-email":"","register-password":""};i(""),o(""),b(Object(c.a)({},e),Object(c.a)({},e),!0)}),[b,i,o]);var m=function(e){"register-email"===e.target.name&&i(e.target.value),"register-password"===e.target.name&&o(e.target.value),h(e)},j="form__input ".concat(!u&&d["register-email"]&&"form__input_type_error"),_="form__error ".concat(!u&&d["register-email"]&&"form__error_visible"),g="form__input ".concat(!u&&d["register-password"]&&"form__input_type_error"),f="form__error ".concat(!u&&d["register-password"]&&"form__error_visible");return Object(p.jsx)("div",{className:"content",children:Object(p.jsx)("section",{className:"auth-form",children:Object(p.jsxs)(w,{name:"register",title:"Sign up",btnLabel:t?"Signing up":"Sign up",linkPath:"/login",linkText:"Already a member? Log in here!",onSubmit:function(e){e.preventDefault(),(u||n&&s)&&a({registerEmail:n,registerPassword:s})},children:[Object(p.jsx)("input",{className:j,type:"email",id:"register-email",name:"register-email",placeholder:"Email",value:n,onChange:m,required:!0}),Object(p.jsx)("span",{id:"register-email-error",className:_,children:d["register-email"]}),Object(p.jsx)("input",{className:g,type:"password",id:"register-password",name:"register-password",placeholder:"Password",value:s,minLength:"8",onChange:m,required:!0}),Object(p.jsx)("span",{id:"register-password-error",className:f,children:d["register-password"]})]})})})};var y=function(e){var t=e.isDataLoading,a=e.onSubmit,n=e.loginEmail,i=e.setLoginEmail,s=e.loginPassword,o=e.setLoginPassword,l=v(["login-email","login-password"]),u=l.isValid,d=l.errors,h=l.handleChange,b=l.resetForm;r.a.useEffect((function(){var e={"login-email":"","login-password":""};i(""),o(""),b(Object(c.a)({},e),Object(c.a)({},e),!0)}),[b,i,o]);var m=function(e){"login-email"===e.target.name&&i(e.target.value),"login-password"===e.target.name&&o(e.target.value),h(e)},j="form__input ".concat(!u&&d["login-email"]&&"form__input_type_error"),_="form__error ".concat(!u&&d["login-email"]&&"form__error_visible"),g="form__input ".concat(!u&&d["login-password"]&&"form__input_type_error"),f="form__error ".concat(!u&&d["login-password"]&&"form__error_visible");return Object(p.jsx)("div",{className:"content",children:Object(p.jsx)("section",{className:"auth-form",children:Object(p.jsxs)(w,{name:"login",title:"Log in",btnLabel:t?"Logging in":"Log in",linkPath:"/register",linkText:"Not a member yet? Sign up here!",onSubmit:function(e){e.preventDefault(),(u||n&&s)&&a({loginEmail:n,loginPassword:s})},children:[Object(p.jsx)("input",{className:j,type:"email",id:"login-email",name:"login-email",placeholder:"Email",value:n,onChange:m,required:!0}),Object(p.jsx)("span",{id:"login-email-error",className:_,children:d["login-email"]}),Object(p.jsx)("input",{className:g,type:"password",id:"login-password",name:"login-password",placeholder:"Password",value:s,minLength:"8",onChange:m,required:!0}),Object(p.jsx)("span",{id:"login-password-error",className:f,children:d["login-password"]})]})})})},E=a.p+"static/media/register-success.1b6082f8.svg",U=a.p+"static/media/register-failure.df8eddf6.svg";var P=function(e){var t=e.name,a=e.isOpen,n=e.isSuccess,r=e.onClose,i="".concat(n?E:U),s="".concat(n?"Success! You have now been registered.":"Oops, something went wrong! Please try again.");return Object(p.jsx)("div",{className:"popup popup_rel_".concat(t," ").concat(a&&"popup_opened"),children:Object(p.jsxs)("div",{className:"popup__container",children:[Object(p.jsx)("img",{className:"popup__tooltip-img",src:i,alt:"Tooltip icon"}),Object(p.jsx)("p",{className:"popup__tooltip-msg",children:s}),Object(p.jsx)("button",{className:"popup__tooltip-close-btn",type:"button","aria-label":"Close popup",onClick:r})]})})};var D=function(){return Object(p.jsx)("footer",{className:"footer",children:Object(p.jsxs)("p",{className:"footer__text",children:["\xa9 ",(new Date).getFullYear()," Around The U.S."]})})},T=a(24),I=["children","isLoggedIn"];var A=function(e){var t=e.children,a=e.isLoggedIn,n=Object(T.a)(e,I);return Object(p.jsx)(d.b,Object(c.a)(Object(c.a)({},n),{},{children:a?t:Object(p.jsx)(d.a,{to:"/login"})}))},R=a(15),V=new function e(t){var a=this;Object(R.a)(this,e),this._checkResponseStatus=function(e){return e.ok?e.json():Promise.reject("Error Code: ".concat(e.status," | Error Message: ").concat(e.statusText))},this.getInitialCards=function(){return fetch("".concat(a._baseUrl,"/cards"),{headers:a._headers}).then(a._checkResponseStatus)},this.addNewCard=function(e,t){return fetch("".concat(a._baseUrl,"/cards"),{method:"POST",headers:a._headers,body:JSON.stringify({name:e,link:t})}).then(a._checkResponseStatus)},this.deleteCard=function(e){return fetch("".concat(a._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:a._headers}).then(a._checkResponseStatus)},this.changeLikeCardStatus=function(e,t){var n=t?"DELETE":"PUT";return fetch("".concat(a._baseUrl,"/cards/likes/").concat(e),{method:n,headers:a._headers}).then(a._checkResponseStatus)},this.getUserData=function(){return fetch("".concat(a._baseUrl,"/users/me"),{headers:a._headers}).then(a._checkResponseStatus)},this.updateUserData=function(e){var t=e.name,n=e.about;return fetch("".concat(a._baseUrl,"/users/me"),{method:"PATCH",headers:a._headers,body:JSON.stringify({name:t,about:n})}).then(a._checkResponseStatus)},this.updateUserAvatar=function(e){return fetch("".concat(a._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:a._headers,body:JSON.stringify({avatar:e})}).then(a._checkResponseStatus)},this._baseUrl=t.baseUrl,this._headers=t.headers}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"9bc9c0f1-5a8a-40aa-b985-20e7b24d1389","Content-Type":"application/json"}}),q=new function e(t){var a=this;Object(R.a)(this,e),this._checkResponseStatus=function(e){return e.ok?e.json():Promise.reject(e)},this.register=function(e,t){return fetch("".concat(a._baseUrl,"/signup"),{method:"POST",headers:a._headers,body:JSON.stringify({email:e,password:t})}).then(a._checkResponseStatus)},this.login=function(e,t){return fetch("".concat(a._baseUrl,"/signin"),{method:"POST",headers:a._headers,body:JSON.stringify({email:e,password:t})}).then(a._checkResponseStatus)},this.validateUserToken=function(e){return fetch("".concat(a._baseUrl,"/users/me"),{headers:Object(c.a)(Object(c.a)({},a._headers),{},{Authorization:"Bearer ".concat(e)})}).then(a._checkResponseStatus)},this._baseUrl=t.baseUrl,this._headers=t.headers}({baseUrl:"https://register.nomoreparties.co",headers:{"Content-Type":"application/json"}});var F=function(){var e=r.a.useState(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],i=r.a.useState(!1),s=Object(u.a)(i,2),o=s[0],h=s[1],b=r.a.useState(!1),_=Object(u.a)(b,2),O=_[0],v=_[1],x=r.a.useState(!1),w=Object(u.a)(x,2),E=w[0],U=w[1],T=r.a.useState(!1),I=Object(u.a)(T,2),R=I[0],F=I[1],J=r.a.useState(!1),M=Object(u.a)(J,2),z=M[0],B=M[1],H=r.a.useState(!1),Y=Object(u.a)(H,2),W=Y[0],G=Y[1],K=r.a.useState(!1),Q=Object(u.a)(K,2),X=Q[0],Z=Q[1],$=r.a.useState(null),ee=Object(u.a)($,2),te=ee[0],ae=ee[1],ne=r.a.useState(null),re=Object(u.a)(ne,2),ie=re[0],se=re[1],oe=r.a.useState([]),ce=Object(u.a)(oe,2),le=ce[0],ue=ce[1],de=r.a.useState({}),pe=Object(u.a)(de,2),he=pe[0],be=pe[1],me=r.a.useState(""),je=Object(u.a)(me,2),_e=je[0],ge=je[1],fe=r.a.useState(!1),Oe=Object(u.a)(fe,2),ve=Oe[0],xe=Oe[1],ke=r.a.useState(""),Ce=Object(u.a)(ke,2),Ne=Ce[0],Se=Ce[1],we=r.a.useState(""),Le=Object(u.a)(we,2),ye=Le[0],Ee=Le[1],Ue=r.a.useState(""),Pe=Object(u.a)(Ue,2),De=Pe[0],Te=Pe[1],Ie=r.a.useState(""),Ae=Object(u.a)(Ie,2),Re=Ae[0],Ve=Ae[1],qe=Object(d.g)();r.a.useEffect((function(){V.getInitialCards().then(ue).catch((function(e){console.log("Uh-oh! Error occurred while fetching the existing cards from the server."),console.log(e)}))}),[]),r.a.useEffect((function(){V.getUserData().then((function(e){return be(e)})).catch((function(e){console.log("Uh-oh! Error occurred while fetching the current user data from the server."),console.log(e)}))}),[]);var Fe=a||o||O||E||R||z;r.a.useEffect((function(){var e=function(e){e.target.classList.contains("popup_opened")&&Je()},t=function(e){"Escape"===e.key&&Je()};return Fe&&(document.addEventListener("click",e),document.addEventListener("keydown",t)),function(){document.removeEventListener("click",e),document.removeEventListener("keydown",t)}}),[Fe]);var Je=function(){n(!1),h(!1),v(!1),U(!1),F(!1),B(!1),ae(null),se(null)},Me=r.a.useCallback((function(){var e=localStorage.getItem("token");e&&q.validateUserToken(e).then((function(e){e&&(ge(e.data.email),xe(!0),qe.push("/"))})).catch((function(e){console.log("Uh-oh! Error occurred while validating token."),400===e.status&&console.log("Token not provided or provided in the wrong format."),401===e.status&&console.log("The provided token is invalid.")}))}),[qe]);r.a.useEffect((function(){Me()}),[Me]);var ze={onEditProfileClick:function(){return n(!0)},onAddPlaceClick:function(){return v(!0)},onEditAvatarClick:function(){return h(!0)},onCardClick:function(e){ae(e),U(!0)},onCardDeleteClick:function(e){se(e),F(!0)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===he._id}));V.changeLikeCardStatus(e._id,t).then((function(t){return ue((function(a){return a.map((function(a){return a._id===e._id?t:a}))}))})).catch((function(e){console.log("Uh-oh! Error occurred while changing the like status of the card."),console.log(e)}))},cards:le},Be={isOpen:o,isDataLoading:X,onClose:Je,onUpdateAvatar:function(e){Z(!0),V.updateUserAvatar(e).then((function(e){be(e),Je()})).catch((function(e){console.log("Uh-oh! Error occurred while updating the user avatar to the server."),console.log(e)})).finally((function(){return Z(!1)}))}},He={isOpen:a,isDataLoading:X,onClose:Je,onUpdateUser:function(e){Z(!0),V.updateUserData(e).then((function(e){be(e),Je()})).catch((function(e){console.log("Uh-oh! Error occurred while updating the user data to the server."),console.log(e)})).finally((function(){return Z(!1)}))}},Ye={isOpen:O,isDataLoading:X,onClose:Je,onAddPlace:function(e,t){Z(!0),V.addNewCard(e,t).then((function(e){ue([e].concat(Object(l.a)(le))),Je()})).catch((function(e){console.log("Uh-oh! Error occurred while adding a new card to the server."),console.log(e)})).finally((function(){return Z(!1)}))}},We={card:te,onClose:Je},Ge={card:ie,isOpen:R,isDataLoading:X,onClose:Je,onCardDelete:function(e){Z(!0),V.deleteCard(e._id).then((function(){ue((function(t){return t.filter((function(t){return t._id!==e._id}))})),Je()})).catch((function(e){console.log("Uh-oh! Error occurred while deleting the selected card from the server."),console.log(e)})).finally((function(){return Z(!1)}))}},Ke={isDataLoading:X,onSubmit:function(){Z(!0),q.register(Ne,ye).then((function(){G(!0),qe.push("/login")})).catch((function(e){G(!1),console.log("Uh-oh! Error occurred while registering a new user."),400===e.status&&console.log("One of the fields was filled in incorrectly while user registration.")})).finally((function(){Z(!1),B(!0);var e=null;clearTimeout(e),e=setTimeout((function(){B(!1)}),2e3)}))},registerEmail:Ne,setRegisterEmail:Se,registerPassword:ye,setRegisterPassword:Ee},Qe={isDataLoading:X,onSubmit:function(){Z(!0),q.login(De,Re).then((function(e){e.token&&(localStorage.setItem("token",e.token),ge(De),Te(""),Ve(""),xe(!0),qe.push("/"))})).catch((function(e){console.log("Uh-oh! Error occurred while logging in."),400===e.status&&console.log("One or more of the fields were not provided while logging in."),401===e.status&&console.log("The user with the specified email not found.")})).finally((function(){return Z(!1)}))},loginEmail:De,setLoginEmail:Te,loginPassword:Re,setLoginPassword:Ve},Xe={isLoggedIn:ve,linkPath:"/login",linkText:"Log in"},Ze={isLoggedIn:ve,linkPath:"/register",linkText:"Sign up"},$e={isLoggedIn:ve,linkText:"Log out",userEmail:_e,onLogOut:function(){localStorage.removeItem("token"),qe.push("/login"),xe(!1),ge("")}},et={name:"tooltip",isOpen:z,isSuccess:W,onClose:Je};return Object(p.jsx)(j.Provider,{value:he,children:Object(p.jsx)("div",{className:"page",children:Object(p.jsxs)("div",{className:"page__wrapper",children:[Object(p.jsxs)(d.d,{children:[Object(p.jsxs)(d.b,{path:"/register",children:[Object(p.jsx)(m,Object(c.a)({},Xe)),Object(p.jsx)(L,Object(c.a)({},Ke))]}),Object(p.jsxs)(d.b,{path:"/login",children:[Object(p.jsx)(m,Object(c.a)({},Ze)),Object(p.jsx)(y,Object(c.a)({},Qe))]}),Object(p.jsxs)(A,{exact:!0,path:"/",isLoggedIn:ve,children:[Object(p.jsx)(m,Object(c.a)({},$e)),Object(p.jsx)(g,Object(c.a)({},ze)),Object(p.jsx)(C,Object(c.a)({},Be)),Object(p.jsx)(k,Object(c.a)({},He)),Object(p.jsx)(N,Object(c.a)({},Ye)),Object(p.jsx)(f,Object(c.a)({},We)),Object(p.jsx)(S,Object(c.a)({},Ge)),Object(p.jsx)(D,{})]})]}),Object(p.jsx)(P,Object(c.a)({},et))]})})})};a(35);s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(o.a,{basename:"/react-around-auth",children:Object(p.jsx)(F,{})})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.f69d424d.chunk.js.map