(this["webpackJsonpreact-around-auth"]=this["webpackJsonpreact-around-auth"]||[]).push([[0],{34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(19),i=a.n(s),c=a(9),o=a(4),l=a(22),u=a(2),d=a(3),p=a(0);var b=function(e){var t=e.setIsMenuOpen,a=e.isMenuOpen,n=e.linkText,s=e.userEmail,i=e.onLogOut,c="".concat(a?"hamburger__button hamburger__button_close":"hamburger__button"),o="".concat(a?"hamburger__menu hamburger__menu_visible":"hamburger__menu");return r.a.useEffect((function(){t(!1)}),[t]),Object(p.jsxs)("div",{className:"hamburger",children:[Object(p.jsx)("button",{className:c,type:"button","aria-label":"Hamburger Button",onClick:function(){return t(!a)}}),Object(p.jsx)("nav",{className:o,onClick:function(){return t(!1)},children:Object(p.jsxs)("ul",{className:"hamburger__menu-list",children:[Object(p.jsx)("li",{className:"hamburger__menu-list-item",children:Object(p.jsx)("p",{className:"hamburger__text",children:s})}),Object(p.jsx)("li",{className:"hamburger__menu-list-item",children:Object(p.jsx)("button",{className:"hamburger__logout-button",onClick:i,children:n})})]})})]})},h=a.p+"static/media/logo.3755f99c.svg";var m=function(e){var t=r.a.useState(window.innerWidth),a=Object(u.a)(t,2),n=a[0],s=a[1],i=r.a.useState(!1),l=Object(u.a)(i,2),d=l[0],m=l[1],j="".concat(d&&n<=550?"header header_menu-open":"header");return r.a.useEffect((function(){var e=null,t=function(){clearTimeout(e),e=setTimeout((function(){s(window.innerWidth)}),150)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}})),Object(p.jsxs)("header",{className:j,children:[Object(p.jsx)("img",{className:"logo",src:h,alt:"logo of the webpage having text around the US"}),Object(p.jsx)("div",{className:"header__content",children:function(){if(!e.isLoggedIn){var t=e.linkPath,a=e.linkText;return Object(p.jsx)("nav",{className:"header__menu",children:Object(p.jsx)(c.b,{className:"header__link",to:t,children:a})})}if(e.isLoggedIn&&n>550){var r=e.linkText,s=e.userEmail,i=e.onLogOut;return Object(p.jsx)("nav",{className:"header__menu",children:Object(p.jsxs)("ul",{className:"header__menu-list",children:[Object(p.jsx)("li",{children:Object(p.jsx)("p",{className:"header__text",children:s})}),Object(p.jsx)("li",{children:Object(p.jsx)("button",{className:"header__button",onClick:i,children:r})})]})})}return Object(p.jsx)(b,Object(o.a)({setIsMenuOpen:m,isMenuOpen:d},e))}()})]})},j=r.a.createContext();var _=function(e){var t=e.card,a=e.onCardClick,n=e.onCardLike,s=e.onCardDeleteClick,i=r.a.useContext(j),c=t.owner._id===i._id,o="element__delete-btn ".concat(c?"element__delete-btn_visible":"element__delete-btn_hidden"),l=t.likes.some((function(e){return e._id===i._id})),u="element__like-btn ".concat(l&&"element__like-btn_active");return Object(p.jsxs)("li",{className:"element",children:[Object(p.jsx)("img",{className:"element__img",src:t.link,alt:t.name,onClick:function(){return a(t)}}),Object(p.jsxs)("div",{className:"element__text",children:[Object(p.jsx)("h2",{className:"element__title",children:t.name}),Object(p.jsxs)("div",{className:"element__likes",children:[Object(p.jsx)("button",{className:u,type:"button","aria-label":"Like Image",onClick:function(){return n(t)}}),Object(p.jsx)("p",{className:"element__like-count",children:t.likes.length})]})]}),Object(p.jsx)("button",{className:o,type:"button","aria-label":"Delete Image",onClick:function(){return s(t)}})]},t._id)};var f=function(e){var t=e.cards,a=e.onEditProfileClick,n=e.onAddPlaceClick,s=e.onEditAvatarClick,i=e.onCardClick,c=e.onCardDeleteClick,o=e.onCardLike,l=r.a.useContext(j);return Object(p.jsxs)("main",{children:[Object(p.jsxs)("section",{className:"profile",children:[Object(p.jsxs)("div",{className:"profile__avatar-container",children:[Object(p.jsx)("img",{className:"profile__avatar",src:l.avatar,alt:"profile avatar"}),Object(p.jsx)("button",{className:"profile__avatar-update-button",type:"button","aria-label":"Update Profile Picture",onClick:s})]}),Object(p.jsxs)("div",{className:"profile__info",children:[Object(p.jsxs)("div",{className:"profile__main-content",children:[Object(p.jsx)("h1",{className:"profile__title",children:l.name}),Object(p.jsx)("button",{className:"profile__edit-btn",type:"button","aria-label":"Edit Profile",onClick:a})]}),Object(p.jsx)("p",{className:"profile__subtitle",children:l.about})]}),Object(p.jsx)("button",{className:"profile__add-btn",type:"button","aria-label":"Add Image",onClick:n})]}),Object(p.jsx)("section",{children:Object(p.jsx)("ul",{className:"elements",children:t.map((function(e){return Object(p.jsx)(_,{card:e,onCardClick:i,onCardLike:o,onCardDeleteClick:c},e._id)}))})})]})};var g=function(e){var t=e.card,a=e.onClose;return Object(p.jsx)("div",{className:"popup popup_rel_image ".concat(t&&"popup_opened"),children:Object(p.jsxs)("div",{className:"popup__container popup__container_rel_image",children:[Object(p.jsxs)("figure",{className:"popup__figure",children:[Object(p.jsx)("img",{className:"popup__img",src:"".concat(t&&t.link),alt:"".concat(t&&t.name)}),Object(p.jsx)("figcaption",{className:"popup__caption",children:"".concat(t&&t.name)})]}),Object(p.jsx)("button",{className:"popup__close-btn popup__close-btn_rel_image",type:"button",onClick:a,"aria-label":"Close popup"})]})})};var O=function(e){var t=e.children,a=e.onClose,n=e.onSubmit,s=e.name,i=e.title,c=e.btnLabel,o=e.isOpen,l=r.a.createRef(),d=r.a.useState(!1),b=Object(u.a)(d,2),h=b[0],m=b[1];r.a.useEffect((function(){m(l.current.checkValidity())}),[o,l]);var j="popup__submit popup__submit_rel_".concat(s," ").concat(!h&&"popup__submit_disabled");return Object(p.jsx)("div",{className:"popup popup_rel_".concat(s," ").concat(o&&"popup_opened"),children:Object(p.jsxs)("div",{className:"popup__container",children:[Object(p.jsxs)("form",{className:"popup__form",name:s,action:"#",ref:l,onSubmit:n,onChange:function(){m(l.current.checkValidity())},noValidate:!0,children:[Object(p.jsx)("h2",{className:"popup__title popup__title_rel_".concat(s),children:i}),t,Object(p.jsx)("button",{className:j,type:"submit","aria-label":"".concat(c," ").concat(s),children:c})]}),Object(p.jsx)("button",{className:"popup__close-btn",type:"button","aria-label":"Close popup",onClick:a})]})})},v=function(e,t){var a=e.target,n=a.name,r=a.value,s=a.validity,i=a.validationMessage,c=t.filter((function(e){return e.name===n}))[0],o=c.setValue,l=c.setValidity,u=c.setErrorMessage;o(r),l(s.valid),!s.valid&&u(i)};var x=function(e){var t=e.isOpen,a=e.isDataLoading,n=e.onClose,s=e.onUpdateUser,i=r.a.useState(""),c=Object(u.a)(i,2),o=c[0],l=c[1],d=r.a.useState(""),b=Object(u.a)(d,2),h=b[0],m=b[1],_=r.a.useState(!0),f=Object(u.a)(_,2),g=f[0],x=f[1],k=r.a.useState(!0),S=Object(u.a)(k,2),C=S[0],N=S[1],y=r.a.useState(""),E=Object(u.a)(y,2),w=E[0],L=E[1],U=r.a.useState(""),P=Object(u.a)(U,2),D=P[0],T=P[1],V=r.a.useContext(j),I=[{name:"title",setValue:l,setValidity:x,setErrorMessage:L},{name:"subtitle",setValue:m,setValidity:N,setErrorMessage:T}];r.a.useEffect((function(){l(V.name||""),m(V.about||""),x(!0),N(!0),L(""),T("")}),[V,t]);var R=function(e){return v(e,I)},A="popup__input ".concat(!g&&"popup__input_type_error"),M="popup__error ".concat(!g&&"popup__error_visible"),q="popup__input ".concat(!C&&"popup__input_type_error"),J="popup__error ".concat(!C&&"popup__error_visible");return Object(p.jsxs)(O,{name:"profile",title:"Edit profile",btnLabel:a?"Saving":"Save",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),s({name:o,about:h})},children:[Object(p.jsx)("input",{className:A,type:"text",id:"name-input",name:"title",placeholder:"Name",minLength:"2",maxLength:"40",onChange:R,value:o,required:!0}),Object(p.jsx)("span",{id:"name-input-error",className:M,children:w}),Object(p.jsx)("input",{className:q,type:"text",id:"about-input",name:"subtitle",placeholder:"About me",minLength:"2",maxLength:"200",onChange:R,value:h,required:!0}),Object(p.jsx)("span",{id:"about-input-error",className:J,children:D})]})};var k=function(e){var t=e.isOpen,a=e.isDataLoading,n=e.onClose,s=e.onUpdateAvatar,i=r.a.useState(!0),c=Object(u.a)(i,2),o=c[0],l=c[1],d=r.a.useState(""),b=Object(u.a)(d,2),h=b[0],m=b[1],j=r.a.useRef();r.a.useEffect((function(){j.current.value="",l(!0)}),[t]);var _="popup__input ".concat(!o&&"popup__input_type_error"),f="popup__error ".concat(!o&&"popup__error_visible");return Object(p.jsxs)(O,{name:"avatar",title:"Change Profile Picture",btnLabel:a?"Saving":"Save",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),s(j.current.value)},children:[Object(p.jsx)("input",{className:_,type:"url",id:"avatarlink-input",name:"avatarlink",placeholder:"Image link",ref:j,onChange:function(e){l(e.target.validity.valid),m(j.current.validationMessage)},required:!0}),Object(p.jsx)("span",{id:"avatarlink-input-error",className:f,children:h})]})};var S=function(e){var t=e.isOpen,a=e.isDataLoading,n=e.onClose,s=e.onAddPlace,i=r.a.useState(""),c=Object(u.a)(i,2),o=c[0],l=c[1],d=r.a.useState(""),b=Object(u.a)(d,2),h=b[0],m=b[1],j=r.a.useState(!0),_=Object(u.a)(j,2),f=_[0],g=_[1],x=r.a.useState(!0),k=Object(u.a)(x,2),S=k[0],C=k[1],N=r.a.useState(""),y=Object(u.a)(N,2),E=y[0],w=y[1],L=r.a.useState(""),U=Object(u.a)(L,2),P=U[0],D=U[1],T=[{name:"name",setValue:l,setValidity:g,setErrorMessage:w},{name:"link",setValue:m,setValidity:C,setErrorMessage:D}];r.a.useEffect((function(){l(""),m(""),g(!0),C(!0),w(""),D("")}),[t]);var V=function(e){return v(e,T)},I="popup__input ".concat(!f&&"popup__input_type_error"),R="popup__error ".concat(!f&&"popup__error_visible"),A="popup__input ".concat(!S&&"popup__input_type_error"),M="popup__error ".concat(!S&&"popup__error_visible");return Object(p.jsxs)(O,{name:"place",title:"New Place",btnLabel:a?"Creating":"Create",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),(f&&S||""!==o&&""!==h)&&s(o,h)},children:[Object(p.jsx)("input",{className:I,type:"text",id:"place-input",name:"name",placeholder:"Title",minLength:"1",maxLength:"30",value:o,onChange:V,required:!0}),Object(p.jsx)("span",{id:"place-input-error",className:R,children:E}),Object(p.jsx)("input",{className:A,type:"url",id:"link-input",name:"link",placeholder:"Image link",value:h,onChange:V,required:!0}),Object(p.jsx)("span",{id:"link-input-error",className:M,children:P})]})};var C=function(e){var t=e.card,a=e.isOpen,n=e.isDataLoading,r=e.onClose,s=e.onCardDelete;return Object(p.jsx)(O,{name:"delete",title:"Are you sure?",btnLabel:n?"Deleting":"Yes",isOpen:a,onClose:r,onSubmit:function(e){e.preventDefault(),s(t)}})};var N=function(e){var t=e.name,a=e.title,n=e.btnLabel,s=e.linkPath,i=e.linkText,o=e.onSubmit,l=e.children,d=r.a.createRef(),b=r.a.useState(!1),h=Object(u.a)(b,2),m=h[0],j=h[1],_="form__submit ".concat(!m&&"form__submit_disabled");return Object(p.jsxs)("form",{className:"form",name:t,action:"#",ref:d,onSubmit:o,onChange:function(){j(d.current.checkValidity())},noValidate:!0,children:[Object(p.jsx)("h2",{className:"form__title",children:a}),l,Object(p.jsx)("button",{className:_,type:"submit","aria-label":"".concat(n," ").concat(t),children:n}),Object(p.jsx)(c.b,{to:s,className:"form__link",children:i})]})};var y=function(e){var t=e.isDataLoading,a=e.onSubmit,n=e.registerEmail,s=e.setRegisterEmail,i=e.registerPassword,c=e.setRegisterPassword,o=r.a.useState(!0),l=Object(u.a)(o,2),d=l[0],b=l[1],h=r.a.useState(!0),m=Object(u.a)(h,2),j=m[0],_=m[1],f=r.a.useState(""),g=Object(u.a)(f,2),O=g[0],x=g[1],k=r.a.useState(""),S=Object(u.a)(k,2),C=S[0],y=S[1],E="form__input ".concat(!d&&"form__input_type_error"),w="form__error ".concat(!d&&"form__error_visible"),L="form__input ".concat(!j&&"form__input_type_error"),U="form__error ".concat(!j&&"form__error_visible"),P=[{name:"register-email",setValue:s,setValidity:b,setErrorMessage:x},{name:"register-password",setValue:c,setValidity:_,setErrorMessage:y}];r.a.useEffect((function(){s(""),c(""),b(!0),_(!0),x(""),y("")}),[s,c]);var D=function(e){return v(e,P)};return Object(p.jsx)("div",{className:"content",children:Object(p.jsx)("section",{className:"auth-form",children:Object(p.jsxs)(N,{name:"register",title:"Sign up",btnLabel:t?"Signing up":"Sign up",linkPath:"/login",linkText:"Already a member? Log in here!",onSubmit:function(e){e.preventDefault(),(d&&j||""!==n&&""!==i)&&a({registerEmail:n,registerPassword:i})},children:[Object(p.jsx)("input",{className:E,type:"email",id:"register-email",name:"register-email",placeholder:"Email",value:n,onChange:D,required:!0}),Object(p.jsx)("span",{id:"register-email-error",className:w,children:O}),Object(p.jsx)("input",{className:L,type:"password",id:"register-password",name:"register-password",placeholder:"Password",value:i,minLength:"8",onChange:D,required:!0}),Object(p.jsx)("span",{id:"register-password-error",className:U,children:C})]})})})};var E=function(e){var t=e.isDataLoading,a=e.onSubmit,n=e.loginEmail,s=e.setLoginEmail,i=e.loginPassword,c=e.setLoginPassword,o=r.a.useState(!0),l=Object(u.a)(o,2),d=l[0],b=l[1],h=r.a.useState(!0),m=Object(u.a)(h,2),j=m[0],_=m[1],f=r.a.useState(""),g=Object(u.a)(f,2),O=g[0],x=g[1],k=r.a.useState(""),S=Object(u.a)(k,2),C=S[0],y=S[1],E="form__input ".concat(!d&&"form__input_type_error"),w="form__error ".concat(!d&&"form__error_visible"),L="form__input ".concat(!j&&"form__input_type_error"),U="form__error ".concat(!j&&"form__error_visible"),P=[{name:"login-email",setValue:s,setValidity:b,setErrorMessage:x},{name:"login-password",setValue:c,setValidity:_,setErrorMessage:y}];r.a.useEffect((function(){b(!0),_(!0),x(""),y("")}),[]);var D=function(e){return v(e,P)};return Object(p.jsx)("div",{className:"content",children:Object(p.jsx)("section",{className:"auth-form",children:Object(p.jsxs)(N,{name:"login",title:"Log in",btnLabel:t?"Logging in":"Log in",linkPath:"/register",linkText:"Not a member yet? Sign up here!",onSubmit:function(e){e.preventDefault(),(d&&j||""!==n&&""!==i)&&a({loginEmail:n,loginPassword:i})},children:[Object(p.jsx)("input",{className:E,type:"email",id:"login-email",name:"login-email",placeholder:"Email",value:n,onChange:D,required:!0}),Object(p.jsx)("span",{id:"login-email-error",className:w,children:O}),Object(p.jsx)("input",{className:L,type:"password",id:"login-password",name:"login-password",placeholder:"Password",value:i,minLength:"8",onChange:D,required:!0}),Object(p.jsx)("span",{id:"login-password-error",className:U,children:C})]})})})},w=a.p+"static/media/register-success.1b6082f8.svg",L=a.p+"static/media/register-failure.df8eddf6.svg";var U=function(e){var t=e.name,a=e.isOpen,n=e.isSuccess,r=e.onClose,s="".concat(n?w:L),i="".concat(n?"Success! You have now been registered.":"Oops, something went wrong! Please try again.");return Object(p.jsx)("div",{className:"popup popup_rel_".concat(t," ").concat(a&&"popup_opened"),children:Object(p.jsxs)("div",{className:"popup__container",children:[Object(p.jsx)("img",{className:"popup__tooltip-img",src:s,alt:"Tooltip icon"}),Object(p.jsx)("p",{className:"popup__tooltip-msg",children:i}),Object(p.jsx)("button",{className:"popup__tooltip-close-btn",type:"button","aria-label":"Close popup",onClick:r})]})})};var P=function(){return Object(p.jsx)("footer",{className:"footer",children:Object(p.jsx)("p",{className:"footer__text",children:"\xa9 2021 Around The U.S."})})},D=a(23),T=["children","isLoggedIn"];var V=function(e){var t=e.children,a=e.isLoggedIn,n=Object(D.a)(e,T);return Object(p.jsx)(d.b,Object(o.a)(Object(o.a)({},n),{},{children:a?t:Object(p.jsx)(d.a,{to:"/login"})}))},I=a(14),R=new function e(t){var a=this;Object(I.a)(this,e),this._checkResponseStatus=function(e){return e.ok?e.json():Promise.reject("Error Code: ".concat(e.status," | Error Message: ").concat(e.statusText))},this.getInitialCards=function(){return fetch("".concat(a._baseUrl,"/cards"),{headers:a._headers}).then(a._checkResponseStatus)},this.addNewCard=function(e,t){return fetch("".concat(a._baseUrl,"/cards"),{method:"POST",headers:a._headers,body:JSON.stringify({name:e,link:t})}).then(a._checkResponseStatus)},this.deleteCard=function(e){return fetch("".concat(a._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:a._headers}).then(a._checkResponseStatus)},this.changeLikeCardStatus=function(e,t){var n=t?"DELETE":"PUT";return fetch("".concat(a._baseUrl,"/cards/likes/").concat(e),{method:n,headers:a._headers}).then(a._checkResponseStatus)},this.getUserData=function(){return fetch("".concat(a._baseUrl,"/users/me"),{headers:a._headers}).then(a._checkResponseStatus)},this.updateUserData=function(e){var t=e.name,n=e.about;return fetch("".concat(a._baseUrl,"/users/me"),{method:"PATCH",headers:a._headers,body:JSON.stringify({name:t,about:n})}).then(a._checkResponseStatus)},this.updateUserAvatar=function(e){return fetch("".concat(a._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:a._headers,body:JSON.stringify({avatar:e})}).then(a._checkResponseStatus)},this._baseUrl=t.baseUrl,this._headers=t.headers}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"9bc9c0f1-5a8a-40aa-b985-20e7b24d1389","Content-Type":"application/json"}}),A=new function e(t){var a=this;Object(I.a)(this,e),this._checkResponseStatus=function(e){return e.ok?e.json():Promise.reject(e)},this.register=function(e,t){return fetch("".concat(a._baseUrl,"/signup"),{method:"POST",headers:a._headers,body:JSON.stringify({email:e,password:t})}).then(a._checkResponseStatus)},this.login=function(e,t){return fetch("".concat(a._baseUrl,"/signin"),{method:"POST",headers:a._headers,body:JSON.stringify({email:e,password:t})}).then(a._checkResponseStatus)},this.validateUserToken=function(e){return fetch("".concat(a._baseUrl,"/users/me"),{headers:Object(o.a)(Object(o.a)({},a._headers),{},{Authorization:"Bearer ".concat(e)})}).then(a._checkResponseStatus)},this._baseUrl=t.baseUrl,this._headers=t.headers}({baseUrl:"https://register.nomoreparties.co",headers:{"Content-Type":"application/json"}});var M=function(){var e=r.a.useState(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],s=r.a.useState(!1),i=Object(u.a)(s,2),c=i[0],b=i[1],h=r.a.useState(!1),_=Object(u.a)(h,2),O=_[0],v=_[1],N=r.a.useState(!1),w=Object(u.a)(N,2),L=w[0],D=w[1],T=r.a.useState(!1),I=Object(u.a)(T,2),M=I[0],q=I[1],J=r.a.useState(!1),z=Object(u.a)(J,2),B=z[0],H=z[1],W=r.a.useState(!1),Y=Object(u.a)(W,2),F=Y[0],G=Y[1],K=r.a.useState(!1),Q=Object(u.a)(K,2),X=Q[0],Z=Q[1],$=r.a.useState(null),ee=Object(u.a)($,2),te=ee[0],ae=ee[1],ne=r.a.useState(null),re=Object(u.a)(ne,2),se=re[0],ie=re[1],ce=r.a.useState([]),oe=Object(u.a)(ce,2),le=oe[0],ue=oe[1],de=r.a.useState({}),pe=Object(u.a)(de,2),be=pe[0],he=pe[1],me=r.a.useState(""),je=Object(u.a)(me,2),_e=je[0],fe=je[1],ge=r.a.useState(!1),Oe=Object(u.a)(ge,2),ve=Oe[0],xe=Oe[1],ke=r.a.useState(""),Se=Object(u.a)(ke,2),Ce=Se[0],Ne=Se[1],ye=r.a.useState(""),Ee=Object(u.a)(ye,2),we=Ee[0],Le=Ee[1],Ue=r.a.useState(""),Pe=Object(u.a)(Ue,2),De=Pe[0],Te=Pe[1],Ve=r.a.useState(""),Ie=Object(u.a)(Ve,2),Re=Ie[0],Ae=Ie[1],Me=Object(d.g)();r.a.useEffect((function(){R.getInitialCards().then(ue).catch((function(e){console.log("Uh-oh! Error occurred while fetching the existing cards from the server."),console.log(e)}))}),[]),r.a.useEffect((function(){R.getUserData().then((function(e){return he(e)})).catch((function(e){console.log("Uh-oh! Error occurred while fetching the current user data from the server."),console.log(e)}))}),[]);var qe=a||c||O||L||M||B;r.a.useEffect((function(){var e=function(e){e.target.classList.contains("popup_opened")&&Je()},t=function(e){"Escape"===e.key&&Je()};return qe&&(document.addEventListener("click",e),document.addEventListener("keydown",t)),function(){document.removeEventListener("click",e),document.removeEventListener("keydown",t)}}),[qe]);var Je=function(){n(!1),b(!1),v(!1),D(!1),q(!1),H(!1),ae(null),ie(null)},ze=r.a.useCallback((function(){var e=localStorage.getItem("token");e&&A.validateUserToken(e).then((function(e){e&&(fe(e.data.email),xe(!0),Me.push("/"))})).catch((function(e){console.log("Uh-oh! Error occurred while validating token."),400===e.status&&console.log("Token not provided or provided in the wrong format."),401===e.status&&console.log("The provided token is invalid.")}))}),[Me]);r.a.useEffect((function(){ze()}),[ze]);var Be={onEditProfileClick:function(){return n(!0)},onAddPlaceClick:function(){return v(!0)},onEditAvatarClick:function(){return b(!0)},onCardClick:function(e){ae(e),D(!0)},onCardDeleteClick:function(e){ie(e),q(!0)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===be._id}));R.changeLikeCardStatus(e._id,t).then((function(t){return ue((function(a){return a.map((function(a){return a._id===e._id?t:a}))}))})).catch((function(e){console.log("Uh-oh! Error occurred while changing the like status of the card."),console.log(e)}))},cards:le},He={isOpen:c,isDataLoading:X,onClose:Je,onUpdateAvatar:function(e){Z(!0),R.updateUserAvatar(e).then((function(e){he(e),Je()})).catch((function(e){console.log("Uh-oh! Error occurred while updating the user avatar to the server."),console.log(e)})).finally((function(){return Z(!1)}))}},We={isOpen:a,isDataLoading:X,onClose:Je,onUpdateUser:function(e){Z(!0),R.updateUserData(e).then((function(e){he(e),Je()})).catch((function(e){console.log("Uh-oh! Error occurred while updating the user data to the server."),console.log(e)})).finally((function(){return Z(!1)}))}},Ye={isOpen:O,isDataLoading:X,onClose:Je,onAddPlace:function(e,t){Z(!0),R.addNewCard(e,t).then((function(e){ue([e].concat(Object(l.a)(le))),Je()})).catch((function(e){console.log("Uh-oh! Error occurred while adding a new card to the server."),console.log(e)})).finally((function(){return Z(!1)}))}},Fe={card:te,onClose:Je},Ge={card:se,isOpen:M,isDataLoading:X,onClose:Je,onCardDelete:function(e){Z(!0),R.deleteCard(e._id).then((function(){ue((function(t){return t.filter((function(t){return t._id!==e._id}))})),Je()})).catch((function(e){console.log("Uh-oh! Error occurred while deleting the selected card from the server."),console.log(e)})).finally((function(){return Z(!1)}))}},Ke={isDataLoading:X,onSubmit:function(){Z(!0),A.register(Ce,we).then((function(){G(!0),Me.push("/login")})).catch((function(e){G(!1),console.log("Uh-oh! Error occurred while registering a new user."),400===e.status&&console.log("One of the fields was filled in incorrectly while user registration.")})).finally((function(){Z(!1),H(!0);var e=null;clearTimeout(e),e=setTimeout((function(){H(!1)}),2e3)}))},registerEmail:Ce,setRegisterEmail:Ne,registerPassword:we,setRegisterPassword:Le},Qe={isDataLoading:X,onSubmit:function(){Z(!0),A.login(De,Re).then((function(e){e.token&&(localStorage.setItem("token",e.token),fe(De),Te(""),Ae(""),xe(!0),Me.push("/"))})).catch((function(e){console.log("Uh-oh! Error occurred while logging in."),400===e.status&&console.log("One or more of the fields were not provided while logging in."),401===e.status&&console.log("The user with the specified email not found.")})).finally((function(){return Z(!1)}))},loginEmail:De,setLoginEmail:Te,loginPassword:Re,setLoginPassword:Ae},Xe={isLoggedIn:ve,linkPath:"/login",linkText:"Log in"},Ze={isLoggedIn:ve,linkPath:"/register",linkText:"Sign up"},$e={isLoggedIn:ve,linkText:"Log out",userEmail:_e,onLogOut:function(){localStorage.removeItem("token"),Me.push("/login"),xe(!1),fe("")}},et={name:"tooltip",isOpen:B,isSuccess:F,onClose:Je};return Object(p.jsx)(j.Provider,{value:be,children:Object(p.jsx)("div",{className:"page",children:Object(p.jsxs)("div",{className:"page__wrapper",children:[Object(p.jsxs)(d.b,{path:"/register",children:[Object(p.jsx)(m,Object(o.a)({},Xe)),Object(p.jsx)(y,Object(o.a)({},Ke))]}),Object(p.jsxs)(d.b,{path:"/login",children:[Object(p.jsx)(m,Object(o.a)({},Ze)),Object(p.jsx)(E,Object(o.a)({},Qe))]}),Object(p.jsx)(d.d,{children:Object(p.jsxs)(V,{exact:!0,path:"/",isLoggedIn:ve,children:[Object(p.jsx)(m,Object(o.a)({},$e)),Object(p.jsx)(f,Object(o.a)({},Be)),Object(p.jsx)(k,Object(o.a)({},He)),Object(p.jsx)(x,Object(o.a)({},We)),Object(p.jsx)(S,Object(o.a)({},Ye)),Object(p.jsx)(g,Object(o.a)({},Fe)),Object(p.jsx)(C,Object(o.a)({},Ge)),Object(p.jsx)(P,{})]})}),Object(p.jsx)(U,Object(o.a)({},et))]})})})};a(34);i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(c.a,{basename:"/react-around-auth",children:Object(p.jsx)(M,{})})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.b8dd8a2c.chunk.js.map